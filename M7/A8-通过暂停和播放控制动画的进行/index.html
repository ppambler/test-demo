<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!-- 没想到，我竟然写出来了，没有借鉴任何思路，自己想出来的，我尝试了在异步任务添加监听事件，没想
        到是可以的。我把所有的var换成是let也是可以的哦
    -->
</head>
<body>
    <h1>逍遥游</h1>
    <pre id="pre"></pre>
    <button id='button'>暂停</button>
    <script>
        function writeCode(prefix,code,foo) {
            let pre = document.querySelector('#pre')
            let button =document.querySelector('#button')
            let n = 0
            let flag = 0
            setTimeout(function fn(){
                n += 1
                // debugger
                let temp = prefix+code.substring(0,n)
                let temp1 = code.substring(n)
                pre.innerHTML = temp
                if(n < code.length) {
                    let id = setTimeout(fn,100)
                    button.onclick = function() {
                        if(!flag){
                            window.clearTimeout(id)
                            flag = 1
                            button.innerText = '继续'
                        } else {
                            writeCode(temp,temp1)
                            flag = 0
                            button.innerText = '暂停'
                        }
                    }
                }else {
                    foo && foo()
                }
            },10)
        }
        let code = `
        北方的大海里有一条鱼，它的名字叫做鲲。鲲的体积，真不知道大到几千里；
        变化成为鸟，它的名字就叫鹏。鹏的脊背，真不知道长到几千里；当它奋起而飞的时候，
        那展开的双翅就像天边的云。这只鹏鸟呀，随着海上汹涌的波涛迁徙到南方的大海。南方的大海是个天然的大池。
        《齐谐》是一部专门记载怪异事情的书，这本书上记载说：“鹏鸟迁徙到南方的大海，翅膀拍击水面激起三千里的波涛，
        海面上急骤的狂风盘旋而上直冲九万里高空，
        离开北方的大海用了六个月的时间方才停歇下来”。春日林泽原野上蒸腾浮动犹如奔马的雾气，
        低空里沸沸扬扬的尘埃，都是大自然里各种生物的气息吹拂所致。天空是那么湛蓝湛蓝的，
        难道这就是它真正的颜色吗？抑或是高旷辽远没法看到它的尽头呢？鹏鸟在高空往下看，不过也就像这个样子罢了。
        再说水汇积不深，它浮载大船就没有力量。倒杯水在庭堂的低洼处，那么小小的芥草也可以给它当作船；
        而搁置杯子就粘住不动了，因为水太浅而船太大了。风聚积的力量不雄厚，它托负巨大的翅膀便力量不够。
        所以，鹏鸟高飞九万里，狂风就在它的身下，然后方才凭借风力飞行，背负青天而没有什么力量能够阻遏它了，
        然后才像现在这样飞到南方去。寒蝉与小灰雀讥笑它说：“我从地面急速起飞，碰着榆树和檀树的树枝，
        常常飞不到而落在地上，为什么要到九万里的高空而向南飞呢？”到迷茫的郊野去，带上三餐就可以往返，
        肚子还是饱饱的；到百里之外去，要用一整夜时间准备干粮；到千里之外去，三个月以前就要准备粮食。
        寒蝉和灰雀这两个小东西懂得什么！小聪明赶不上大智慧，寿命短比不上寿命长。怎么知道是这样的呢？
        清晨的菌类不会懂得什么是晦朔，寒蝉也不会懂得什么是春秋，这就是短寿。楚国南边有叫冥灵的大龟，
        它把五百年当作春，把五百年当作秋；上古有叫大椿的古树，它把八千年当作春，把八千年当作秋，这就是长寿。
        可是彭祖到如今还是以年寿长久而闻名于世，人们与他攀比，岂不可悲可叹吗？
        商汤询问棘的话是这样的：“在那草木不生的北方，有一个很深的大海，那就是‘天池’。
        那里有一种鱼，它的脊背有好几千里，没有人能够知道它有多长，它的名字叫做鲲，有一种鸟，
        它的名字叫鹏，它的脊背像座大山，展开双翅就像天边的云。鹏鸟奋起而飞，翅膀拍击急速旋转向上的气流直冲九万里高空，
        穿过云气，背负青天，这才向南飞去，打算飞到南方的大海。斥鴳讥笑它说：‘它打算飞到哪儿去？我奋力跳起来往上飞，
        不过几丈高就落了下来，盘旋于蓬蒿丛中，这也是我飞翔的极限了。而它打算飞到什么地方去呢？’”这就是小与大的不同了。
        所以，那些才智足以胜任一个官职，品行合乎一乡人心愿，道德能使国君感到满意，能力足以取信一国之人的人，
        他们看待自己也像是这样哩。而宋荣子却讥笑他们。世上的人们都赞誉他，他不会因此越发努力，世上的人们都非难他，
        他也不会因此而更加沮丧。他清楚地划定自身与物外的区别，辩别荣誉与耻辱的界限，不过如此而已呀！宋荣子他对于整个社会，
        从来不急急忙忙地去追求什么。虽然如此，他还是未能达到最高的境界。列子能驾风行走，那样子实在轻盈美好，而且十五天后方才返回。
        列子对于寻求幸福，从来没有急急忙忙的样子。他这样做虽然免除了行走的劳苦，可还是有所依凭呀。至于遵循宇宙万物的规律，
        把握“六气”的变化，遨游于无穷无尽的境域，他还仰赖什么呢！因此说，道德修养高尚的“至人”能够达到忘我的境界，
        精神世界完全超脱物外的“神人”心目中没有功名和事业，思想修养臻于完美的“圣人”从不去追求名誉和地位。
        `
        writeCode('',code)
        
    </script>
</body>
</html>